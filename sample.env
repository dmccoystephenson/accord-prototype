# Accord Chat MVP - Environment Configuration
# Copy this file to .env and customize as needed

# ============================================
# Port Configuration
# ============================================

# Backend service port exposed to host (default: 8080)
# This is the port you'll access from your host machine
BACKEND_PORT=8080

# Backend internal container port (default: 8080)
# This is the port Spring Boot listens on inside the container
# IMPORTANT: If you change this, update ACCORD_BACKEND_URL and ACCORD_BACKEND_WS_URL below
SERVER_PORT=8080

# Web application service port exposed to host (default: 3000)
# This is the port you'll access from your browser
WEBAPP_PORT=3000

# Web application internal container port (default: 3000)
# This is the port the webapp listens on inside the container
WEBAPP_SERVER_PORT=3000

# ============================================
# Backend Configuration
# ============================================

# Spring Application Name
SPRING_APPLICATION_NAME=accord-chat

# ============================================
# Database Configuration (H2 In-Memory)
# ============================================

# H2 Database URL
SPRING_DATASOURCE_URL=jdbc:h2:mem:chatdb

# H2 Driver
SPRING_DATASOURCE_DRIVER_CLASS_NAME=org.h2.Driver

# Database Credentials
SPRING_DATASOURCE_USERNAME=sa
SPRING_DATASOURCE_PASSWORD=

# JPA Configuration
SPRING_JPA_DATABASE_PLATFORM=org.hibernate.dialect.H2Dialect
SPRING_JPA_HIBERNATE_DDL_AUTO=create-drop
SPRING_JPA_SHOW_SQL=false

# H2 Console (for debugging)
SPRING_H2_CONSOLE_ENABLED=true
SPRING_H2_CONSOLE_PATH=/h2-console

# ============================================
# Security & CORS Configuration
# ============================================

# CORS Allowed Origins
# Use * for development, specific domains for production
# Examples:
#   - Single domain: http://localhost:3000
#   - Multiple domains: http://localhost:3000,https://chat.example.com
APP_CORS_ALLOWED_ORIGINS=*

# ============================================
# Validation Configuration
# ============================================

# Maximum message content length (characters)
APP_MESSAGE_MAX_LENGTH=1000

# Username length constraints
APP_USERNAME_MAX_LENGTH=50
APP_USERNAME_MIN_LENGTH=3

# ============================================
# Web Application Configuration
# ============================================

# Web Application Name
WEBAPP_SPRING_APPLICATION_NAME=accord-webapp

# Backend URLs for webapp SERVER to connect to (server-side, internal Docker network)
# These are used by the webapp server for server-to-server communication
# Use service name (backend) for Docker Compose
ACCORD_BACKEND_URL=http://backend:8080
ACCORD_BACKEND_WS_URL=http://backend:8080/ws

# Backend URLs for BROWSER to connect to (client-side, must be accessible from browser)
# These are used by browser JavaScript to connect to the backend
# IMPORTANT: Must use localhost or your public domain - browsers cannot resolve Docker service names
# Use localhost for local development
ACCORD_BACKEND_CLIENT_URL=http://localhost:8080
ACCORD_BACKEND_CLIENT_WS_URL=http://localhost:8080/ws

# For production with a public domain:
# ACCORD_BACKEND_CLIENT_URL=https://api.yourdomain.com
# ACCORD_BACKEND_CLIENT_WS_URL=https://api.yourdomain.com/ws

# For local development (when not using Docker Compose):
# ACCORD_BACKEND_URL=http://localhost:8080
# ACCORD_BACKEND_WS_URL=http://localhost:8080/ws
# ACCORD_BACKEND_CLIENT_URL=http://localhost:8080
# ACCORD_BACKEND_CLIENT_WS_URL=http://localhost:8080/ws

# If you changed SERVER_PORT or BACKEND_PORT above, update the client URLs:
# Example for BACKEND_PORT=9090 and SERVER_PORT=9090:
# ACCORD_BACKEND_CLIENT_URL=http://localhost:9090
# ACCORD_BACKEND_CLIENT_WS_URL=http://localhost:9090/ws

# ============================================
# Docker Configuration
# ============================================

# Container names (optional, defaults will be used if not set)
# BACKEND_CONTAINER_NAME=accord-backend
# WEBAPP_CONTAINER_NAME=accord-webapp

# ============================================
# Production Notes
# ============================================

# For production deployment:
# 1. Set APP_CORS_ALLOWED_ORIGINS to specific domains
# 2. Consider using PostgreSQL instead of H2:
#    - SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/accord
#    - SPRING_DATASOURCE_USERNAME=accord_user
#    - SPRING_DATASOURCE_PASSWORD=<secure_password>
#    - SPRING_JPA_DATABASE_PLATFORM=org.hibernate.dialect.PostgreSQLDialect
# 3. Set SPRING_JPA_SHOW_SQL=false
# 4. Disable H2 Console: SPRING_H2_CONSOLE_ENABLED=false
# 5. Use environment-specific ports
# 6. Configure reverse proxy (nginx, traefik) for SSL/TLS
